(this["webpackJsonpdemo-code-001"]=this["webpackJsonpdemo-code-001"]||[]).push([[0],{106:function(e,t,n){},116:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n.n(r),c=n(48),i=n.n(c),o=(n(90),n(1)),s=n.n(o),u=n(71),l=n(33),d=n(30),b=n(50),h=n(40),m=n(22),p=new(n(82).a)({supportedChainIds:[1,3,4,5,42]});function f(){var e=Object(m.c)(),t=Object(m.c)("NETWORK");return e.active?e:t}var j=n(19);function v(e){try{return Object(j.a)(e)}catch(t){return!1}}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=v(e);if(!n)throw Error("Invalid 'address' parameter '".concat(e,"'."));return"".concat(n.substring(0,t+2),"...").concat(n.substring(42-t))}var x=n(44),k=n(49);var g=n(31),w=n(5);function y(e){var t=e.message;return t?Object(w.jsx)("div",{className:"alert alert-error mt-5",children:Object(w.jsxs)("div",{className:"flex-1",children:[Object(w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-6 h-6 mx-2 stroke-current",children:Object(w.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),Object(w.jsx)("label",{children:t})]})}):null}function T(e){var t=e.txs;return 0===t.length?null:Object(w.jsx)(w.Fragment,{children:t.map((function(e){return Object(w.jsx)("div",{className:"alert alert-info mt-5",children:Object(w.jsx)("div",{className:"flex-1",children:Object(w.jsx)("label",{children:e.hash})})},e)}))})}var N=n(46),E=function(){return Object(N.b)()},I=N.c,C=n(6),H=Object(C.b)("transactions/addTransaction"),W=Object(C.b)("transactions/finalizeTransaction"),F=Object(C.b)("transactions/checkedTransaction");function A(){var e,t=f().chainId,n=I((function(e){return e.transactions}));return t&&null!==(e=n[t])&&void 0!==e?e:{}}function M(e){return(new Date).getTime()-e.addedTime<864e5}var S,B=n(54),L=B.a.div(S||(S=Object(b.a)(["\n    padding-left: 10px;\n"])));function R(e){var t,n,a=e.hash,c=f().chainId,i=A(),o=null===i||void 0===i?void 0:i[a],s=null===o||void 0===o?void 0:o.info,u=!(null===o||void 0===o?void 0:o.receipt),l=!u&&o&&(1===(null===(t=o.receipt)||void 0===t?void 0:t.status)||"undefined"===typeof(null===(n=o.receipt)||void 0===n?void 0:n.status));return Object(r.useEffect)((function(){console.log("Pending: "+JSON.stringify(u))}),[u]),c?Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{pending:u,success:l,className:"row-div",children:[Object(w.jsx)("div",{children:Object(w.jsxs)("span",{children:[null===s||void 0===s?void 0:s.type,": ",null===s||void 0===s?void 0:s.currencyAmount,' ETH from "',O(null===s||void 0===s?void 0:s.from),'" to "',O(null===s||void 0===s?void 0:s.to),'" ']})}),Object(w.jsx)(L,{children:u?Object(w.jsxs)("span",{children:[String.fromCodePoint("0x1F916"),"pending..."]}):l?Object(w.jsx)("span",{children:String.fromCodePoint("0x1F44C")}):Object(w.jsx)("span",{children:String.fromCodePoint("0x1F631")})})]})}):null}var P,D,U=n(23),_=1,V=3,K=4,J=5,q=42,G=42161,Y=421611,z=10,Z=69,$=(P={},Object(U.a)(P,G,{blockWaitMsBeforeWarning:6e5,bridge:"https://bridge.arbitrum.io/",docs:"https://offchainlabs.com/",explorer:"https://arbiscan.io/",infoLink:"https://info.uniswap.org/#/arbitrum",label:"Arbitrum",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:["https://arb1.arbitrum.io/rpc"]}),Object(U.a)(P,Y,{blockWaitMsBeforeWarning:6e5,bridge:"https://bridge.arbitrum.io/",docs:"https://offchainlabs.com/",explorer:"https://rinkeby-explorer.arbitrum.io/",infoLink:"https://info.uniswap.org/#/arbitrum/",label:"Arbitrum Rinkeby",nativeCurrency:{name:"Rinkeby ArbETH",symbol:"rinkArbETH",decimals:18},rpcUrls:["https://rinkeby.arbitrum.io/rpc"]}),Object(U.a)(P,_,{docs:"https://docs.uniswap.org/",explorer:"https://etherscan.io/",infoLink:"https://info.uniswap.org/#/",label:"Ethereum",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18}}),Object(U.a)(P,K,{docs:"https://docs.uniswap.org/",explorer:"https://rinkeby.etherscan.io/",infoLink:"https://info.uniswap.org/#/",label:"Rinkeby",nativeCurrency:{name:"Rinkeby ETH",symbol:"rinkETH",decimals:18}}),Object(U.a)(P,V,{docs:"https://docs.uniswap.org/",explorer:"https://ropsten.etherscan.io/",infoLink:"https://info.uniswap.org/#/",label:"Ropsten",nativeCurrency:{name:"Ropsten ETH",symbol:"ropETH",decimals:18}}),Object(U.a)(P,q,{docs:"https://docs.uniswap.org/",explorer:"https://kovan.etherscan.io/",infoLink:"https://info.uniswap.org/#/",label:"Kovan",nativeCurrency:{name:"Kovan ETH",symbol:"kovETH",decimals:18}}),Object(U.a)(P,J,{docs:"https://docs.uniswap.org/",explorer:"https://goerli.etherscan.io/",infoLink:"https://info.uniswap.org/#/",label:"G\xf6rli",nativeCurrency:{name:"G\xf6rli ETH",symbol:"g\xf6rETH",decimals:18}}),Object(U.a)(P,z,{blockWaitMsBeforeWarning:6e5,bridge:"https://gateway.optimism.io/",docs:"https://optimism.io/",explorer:"https://optimistic.etherscan.io/",infoLink:"https://info.uniswap.org/#/optimism",label:"O\u039e",nativeCurrency:{name:"Optimistic ETH",symbol:"ETH",decimals:18},rpcUrls:["https://mainnet.optimism.io"],statusPage:"https://optimism.io/status"}),Object(U.a)(P,Z,{blockWaitMsBeforeWarning:6e5,bridge:"https://gateway.optimism.io/",docs:"https://optimism.io/",explorer:"https://optimistic.etherscan.io/",infoLink:"https://info.uniswap.org/#/optimism",label:"Optimistic Kovan",rpcUrls:["https://kovan.optimism.io"],nativeCurrency:{name:"Optimistic kovETH",symbol:"kovOpETH",decimals:18},statusPage:"https://optimism.io/status"}),P);n(106);function Q(e){return/^0x0*$/.test(e)}function X(e){for(var t,n,r="";Boolean(e);){var a,c,i,o;r=null!==(a=null!==(c=e.reason)&&void 0!==c?c:e.message)&&void 0!==a?a:r,e=null!==(i=e.error)&&void 0!==i?i:null===(o=e.data)||void 0===o?void 0:o.originalError}switch(0===(null===(t=r)||void 0===t?void 0:t.indexOf("execution reverted: "))&&(r=r.substr("execution reverted: ".length)),r){case"TransferHelper: TRANSFER_FROM_FAILED":return h.a._("The input token cannot be transferred. There may be an issue with the input token.");case"Too little received":case"Too much requested":case"STF":return h.a._("This transaction will not succeed due to price movement. Try increasing your slippage tolerance. Note: fee on transfer and rebase tokens are incompatible with Uniswap V3.");case"TF":return h.a._("The output token cannot be transferred. There may be an issue with the output token. Note: fee on transfer and rebase tokens are incompatible with Uniswap V3.");default:return-1!==(null===(n=r)||void 0===n?void 0:n.indexOf("undefined is not an object"))?(console.error(e,r),h.a._("An error occurred when trying to execute this swap. You may need to increase your slippage tolerance. If that does not work, there may be an incompatibility with the token you are trading. Note: fee on transfer and rebase tokens are incompatible with Uniswap V3.")):h.a._("Unknown error{0}. Try increasing your slippage tolerance. Note: fee on transfer and rebase tokens are incompatible with Uniswap V3.",{0:r?': "'.concat(r,'"'):""})}}function ee(e,t){return t.addedTime-e.addedTime}var te=B.a.div(D||(D=Object(b.a)(["\n  display:flex;\n  flex-direction: column;\n  flex-wrap: nowrap;\n"])));function ne(e){return Object(w.jsx)(te,{children:e.map((function(e,t){return Object(w.jsx)(R,{hash:e},t)}))})}var re=function(){var e=Object(m.c)(),t=(e.active,e.account),n=e.library,a=e.connector,c=e.chainId,i=e.activate,o=e.deactivate,b=Object(r.useState)(),h=Object(d.a)(b,2),j=h[0],N=h[1],I=c?$[c]:void 0,C=function(){var e=f(),t=e.chainId,n=e.account,a=E();return Object(r.useCallback)((function(e,r){if(n&&t){var c=e.hash;if(!c)throw Error("No transaction hash found.");a(H({hash:c,from:n,info:r,chainId:t}))}}),[a,t,n])}(),W=A(),F=Object(r.useMemo)((function(){var e=Object.values(W);return console.log("All Transactions: "+JSON.stringify(W)),e.filter(M).sort(ee)}),[W]),S=F.filter((function(e){return!e.receipt})).map((function(e){return e.hash})),B=F.filter((function(e){return e.receipt})).map((function(e){return e.hash}));!function(e,t,n){var a=f(),c=a.library,i=a.chainId,o=Object(r.useMemo)((function(){return e?e.map(v).filter((function(e){return!1!==e})).sort():[]}),[e]),u=function(){var e=Object(l.a)(s.a.mark((function e(t){var r,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.library,a=t.addresses,c=t.chainId,r&&a[0]&&Object(k.a)(c).getBalance(a[0]).then((function(e){var t=Object(x.a)(e);n(t)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useMemo)((function(){u({library:c,addresses:o,chainId:i})}),[c,i,t])}(t?[t]:[],S,N);var L=!!S.length;function R(){return(R=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i(p);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function P(){return(P=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{o()}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=function(){var e=Object(l.a)(s.a.mark((function e(r){var a,c,i,o,l,d,b,h;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.setError,c=r.setTxs,i=r.addTransaction,o=r.ether,l=r.addr,e.prev=1,window.ethereum){e.next=4;break}throw new Error("No crypto wallet found. Please install it.");case 4:return console.log("check 01"),e.next=7,window.ethereum.send("eth_requestAccounts");case 7:console.log("check 02 ether: "+o),d=Object(x.b)(o,18),console.log("Value Hex:"+d),b=n.getSigner(),console.log("isZero: "+Q(d)),h=b.sendTransaction(Object(u.a)({from:t,to:l,gasLimit:g.a.from("21000").toHexString()},d&&!Q(d)?{value:d}:{})).then((function(e){console.log({value:d,addr:l}),i(e,{type:"Payment",from:t,to:l,currencyAmount:o})})).catch((function(e){throw 4001===(null===e||void 0===e?void 0:e.code)?new Error("Transaction rejected."):(console.error("Demo Trans Failed",e,l,d),new Error("Demo Trans failed: ".concat(X(e))))})),console.log("tx",h),c([h]),console.log("check 03"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),a(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),U=Object(r.useState)(),_=Object(d.a)(U,2),V=_[0],K=_[1],J=Object(r.useState)([]),q=Object(d.a)(J,2),G=q[0],Y=q[1],z=function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=new FormData(t.target),K(),e.next=5,D({setError:K,setTxs:Y,addTransaction:C,ether:n.get("ether"),addr:n.get("addr")});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"main-div",children:[Object(w.jsx)("button",{onClick:function(){return R.apply(this,arguments)},children:"Connect to MetaMask"}),Object(w.jsx)("br",{}),a&&I?Object(w.jsx)("div",{children:Object(w.jsx)("span",{children:I.label})}):null,a&&j?Object(w.jsx)("div",{children:Object(w.jsxs)("span",{children:[null===j||void 0===j?void 0:j.slice(0,9)," ETH"]})}):null,a?L?Object(w.jsx)("div",{children:Object(w.jsx)("span",{children:"Pending ... "})}):Object(w.jsx)("div",{className:"main-div",children:Object(w.jsxs)("div",{children:[Object(w.jsx)("span",{children:"Connected with "}),Object(w.jsx)("span",{children:Object(w.jsx)("b",{children:O(t)})})]})}):Object(w.jsx)("span",{children:"Not connected"}),Object(w.jsx)("br",{}),Object(w.jsx)("button",{onClick:function(){return P.apply(this,arguments)},children:"Disconnect"}),"\uff40",Object(w.jsx)("form",{onSubmit:z,children:Object(w.jsxs)("div",{className:"main-div",children:[Object(w.jsxs)("main",{children:[Object(w.jsx)("h1",{children:"Send ETH payment"}),Object(w.jsxs)("div",{className:"main-div",children:[Object(w.jsx)("div",{children:Object(w.jsx)("input",{type:"text",name:"addr",placeholder:"Recipient Address"})}),Object(w.jsx)("div",{children:Object(w.jsx)("input",{name:"ether",type:"text",placeholder:"Amount in ETH"})})]})]}),Object(w.jsxs)("footer",{className:"main-div",children:[Object(w.jsx)("button",{type:"submit",children:"Pay now"}),Object(w.jsx)(y,{message:V}),Object(w.jsx)(T,{txs:G})]})]})}),Object(w.jsx)("div",{className:"main-div",children:S.length||B.length?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h1",{children:"Recent Transactions"}),ne(S),ne(B)]}):Object(w.jsx)(w.Fragment,{children:Object(w.jsx)("h3",{children:"Your transactions will appear here..."})})})]})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,123)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},ce=n(57),ie=n(122),oe=Object(C.b)("application/updateBlockNumber"),se=Object(C.d)({blockNumber:{},chainId:null},(function(e){return e.addCase(oe,(function(e,t){var n=t.payload,r=n.chainId,a=n.blockNumber;"number"!==typeof e.blockNumber[r]?e.blockNumber[r]=a:e.blockNumber[r]=Math.max(a,e.blockNumber[r])}))})),ue=function(){return(new Date).getTime()},le=Object(C.d)({},(function(e){e.addCase(H,(function(e,t){var n,r,a=t.payload,c=a.chainId,i=a.from,o=a.hash,s=a.info;if(null===(n=e[c])||void 0===n?void 0:n[o])throw Error("Attempted to add existing transaction.");var u=null!==(r=e[c])&&void 0!==r?r:{};u[o]={hash:o,info:s,from:i,addedTime:ue()},e[c]=u})).addCase(F,(function(e,t){var n,r=t.payload,a=r.chainId,c=r.hash,i=r.blockNumber,o=null===(n=e[a])||void 0===n?void 0:n[c];o&&(o.lastCheckedBlockNumber?o.lastCheckedBlockNumber=Math.max(i,o.lastCheckedBlockNumber):o.lastCheckedBlockNumber=i)})).addCase(W,(function(e,t){var n,r=t.payload,a=r.hash,c=r.chainId,i=r.receipt,o=null===(n=e[c])||void 0===n?void 0:n[a];o&&(o.receipt=i,o.confirmedTime=ue())}))})),de=Object(C.a)({reducer:{application:se,transactions:le}});de.dispatch(Object(C.b)("global/updateVersion")),Object(ie.a)(de.dispatch);var be=de;function he(){var e=f(),t=(e.account,e.chainId),n=e.library,a=E(),c=Object(r.useState)({chainId:t,blockNumber:null}),i=Object(d.a)(c,2),o=i[0],s=i[1],u=Object(r.useCallback)((function(e){s((function(n){return t===n.chainId?"number"!==typeof n.blockNumber?{chainId:t,blockNumber:e}:{chainId:t,blockNumber:Math.max(e,n.blockNumber)}:n}))}),[t,s]);Object(r.useEffect)((function(){if(n&&t)return s({chainId:t,blockNumber:null}),n.getBlockNumber().then(u).catch((function(e){return console.error("Failed to get block number for chainId: ".concat(t),e)})),n.on("block",u),function(){n.removeListener("block",u)}}),[a,t,n,u]);var l=function(e,t){var n=Object(r.useState)(e),a=Object(d.a)(n,2),c=a[0],i=a[1];return Object(r.useEffect)((function(){var n=setTimeout((function(){i(e)}),t);return function(){clearTimeout(n)}}),[e,t]),c}(o,100);return Object(r.useEffect)((function(){l.chainId&&l.blockNumber&&a(oe({chainId:l.chainId,blockNumber:l.blockNumber}))}),[a,l.blockNumber,l.chainId]),null}var me=n(7),pe=n(11),fe=n(12),je=n(63);function ve(e,t){return n=e+Math.round(Math.random()*Math.max(0,t-e)),new Promise((function(e){return setTimeout(e,n)}));var n}var Oe=function(e){Object(pe.a)(n,e);var t=Object(fe.a)(n);function n(){var e;return Object(me.a)(this,n),(e=t.call(this,"Cancelled")).isCancelledError=!0,e}return n}(Object(je.a)(Error)),xe=function(e){Object(pe.a)(n,e);var t=Object(fe.a)(n);function n(){var e;Object(me.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).isRetryableError=!0,e}return n}(Object(je.a)(Error));var ke={42161:{n:10,minWait:250,maxWait:1e3},421611:{n:10,minWait:250,maxWait:1e3},69:{n:10,minWait:250,maxWait:1e3},10:{n:10,minWait:250,maxWait:1e3}},ge={n:1,minWait:0,maxWait:0};function we(){var e=f(),t=e.chainId,n=e.library,a=function(){var e=f().chainId;return I((function(t){return t.application.blockNumber[null!==e&&void 0!==e?e:-1]}))}(),c=E(),i=I((function(e){return e.transactions})),o=Object(r.useMemo)((function(){var e;return t&&null!==(e=i[t])&&void 0!==e?e:{}}),[t,i]),u=Object(r.useCallback)((function(e){var r;if(!n||!t)throw new Error("No library or chainId");return function(e,t){var n,r=t.n,a=t.minWait,c=t.maxWait,i=!1,o=new Promise(function(){var t=Object(l.a)(s.a.mark((function t(o,u){var l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=u;case 1:return l=void 0,t.prev=3,t.next=6,e();case 6:return l=t.sent,i||(o(l),i=!0),t.abrupt("break",24);case 11:if(t.prev=11,t.t0=t.catch(3),!i){t.next=15;break}return t.abrupt("break",24);case 15:if(!(r<=0)&&t.t0.isRetryableError){t.next=19;break}return u(t.t0),i=!0,t.abrupt("break",24);case 19:r--;case 20:return t.next=22,ve(a,c);case 22:t.next=1;break;case 24:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,n){return t.apply(this,arguments)}}());return{promise:o,cancel:function(){i||(i=!0,n(new Oe))}}}((function(){return n.getTransactionReceipt(e).then((function(t){if(null===t)throw console.debug("Retrying for hash",e),new xe;return t}))}),null!==(r=ke[t])&&void 0!==r?r:ge)}),[t,n]);return Object(r.useEffect)((function(){if(t&&n&&a){var e=Object.keys(o).filter((function(e){return function(e,t){if(t.receipt)return!1;if(!t.lastCheckedBlockNumber)return!0;var n=e-t.lastCheckedBlockNumber;if(n<1)return!1;var r=((new Date).getTime()-t.addedTime)/1e3/60;return r>60?n>9:!(r>5)||n>2}(a,o[e])})).map((function(e){var n=u(e),r=n.promise,i=n.cancel;return r.then((function(n){n?(c(W({chainId:t,hash:e,receipt:{blockHash:n.blockHash,blockNumber:n.blockNumber,contractAddress:n.contractAddress,from:n.from,status:n.status,to:n.to,transactionHash:n.transactionHash,transactionIndex:n.transactionIndex}})),n.blockNumber>a&&c(oe({chainId:t,blockNumber:n.blockNumber}))):c(F({chainId:t,hash:e,blockNumber:a}))})).catch((function(t){t.isCancelledError||console.error("Failed to check transaction hash: ".concat(e),t)})),i}));return function(){e.forEach((function(e){return e()}))}}}),[t,n,o,a,c,u]),null}var ye=Object(m.b)("NETWORK");function Te(e){return new ce.a(e)}function Ne(){return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(he,{}),Object(w.jsx)(we,{})]})}i.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(N.a,{store:be,children:Object(w.jsx)(m.a,{getLibrary:Te,children:Object(w.jsxs)(ye,{getLibrary:Te,children:[Object(w.jsx)(Ne,{}),Object(w.jsx)(re,{})]})})})}),document.getElementById("root")),ae()},90:function(e,t,n){},92:function(e,t){},93:function(e,t){}},[[116,1,2]]]);
//# sourceMappingURL=main.fa0142b1.chunk.js.map